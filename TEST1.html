<html>
  <head>
    <title>deck.gl ColumnLayer Example</title>

    <script src="https://unpkg.com/deck.gl@^8.8.0/dist.min.js"></script>
    <script src="https://d3js.org/d3.v5.min.js" type="text/javascript"></script>
    <script src="https://unpkg.com/deck.gl@latest/dist.min.js"></script>
    <script src="https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.js"></script>
    <link href="https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.css" rel="stylesheet" />

    <style type="text/css">
      body {
        width: 100vw;
        height: 100vh;
        margin: 0;
      }
    </style>
  </head>

  <body></body>

  <script type="text/javascript">
    const {DeckGL, ColumnLayer} = deck;
    const token = 'pk.eyJ1IjoiZGlhbmFtZW93IiwiYSI6ImNqcmh4aWJnOTIxemI0NXA0MHYydGwzdm0ifQ.9HakB25m0HLT-uDY2yat7A'
    new DeckGL({
      mapboxApiAccessToken: token,
      mapStyle: 'mapbox://styles/mapbox/dark-v10',
      initialViewState: {
        container: 'map',
        longitude: -1.932311,
        latitude: 51.923,
        pitch: 60,
        bearing: -32,
        minZoom: 5,
        zoom: 7
      },

      controller: true,
      layers: [
        new ColumnLayer({
          id: 'column',
          data:
            'https://raw.githubusercontent.com/KajanGH/data/main/fem.json',
          diskResolution: 12,
          radius: 2500,
          elevationScale: 1,
          getPosition: d => [d.Longitude, d.Latitude],
          getFillColor: d => [48, 128, d.age_0 * 255, 255],
          getElevation: d => d.age_0
        })
      ]
    });
  </script>
</html>